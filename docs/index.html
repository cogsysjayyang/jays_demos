<div id="jsonTableContainer"></div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.3.2/html2canvas.min.js">
    const apiUrl = './data.json'; // json file path

    fetch(apiUrl)
.then(response => response.json())
.then(data => {
    const container = document.getElementById('jsonTableContainer');
    const table = document.createElement('table');
    table.style.width = '100%';
    table.setAttribute('border', '1');
    const tbody = document.createElement('tbody');

    // 创建表头
    const thead = document.createElement('thead');
    const headerRow = document.createElement('tr');
    Object.keys(data[0]).forEach(key => {
        const th = document.createElement('th');
        th.textContent = key;
        headerRow.appendChild(th);
    });
    thead.appendChild(headerRow);
    table.appendChild(thead);

    // 创建表格数据行
    data.forEach(item => {
        const row = document.createElement('tr');
        Object.values(item).forEach(val => {
            const td = document.createElement('td');
            td.textContent = val;
            row.appendChild(td);
        });
        tbody.appendChild(row);
    });

    table.appendChild(tbody);
    container.appendChild(table);

    // 转换表格为图像
    html2canvas(table).then(canvas => {
        const image = canvas.toDataURL("image/png");
        let imgElement = document.createElement('img');
        imgElement.src = image;
        document.body.appendChild(imgElement); // 添加图像到页面
        // container.style.display = 'none'; // 隐藏原表格（可选）
    });
})
.catch(error => console.error('Error loading JSON data from file: ', error));
</script>
